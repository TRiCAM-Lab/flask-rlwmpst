<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>RLWMPST</title>

  <!-- Load jquery and other libraries -->
  <script src="lib/jquery-min.js" type="text/javascript"></script>
  <script src="lib/underscore-min.js" type="text/javascript"></script>
  <script src="lib/backbone-min.js" type="text/javascript"></script>
  <script src="lib/d3.v3.min.js" type="text/javascript"> </script>

  <!-- Load jsPsych and plugins -->
  <script src="js/jspsych/jspsych.js" type="text/javascript"></script>
  <script src="js/jspsych/plugins/jspsych-instructions.js" type="text/javascript"></script>
  <script src="js/jspsych/plugins/jspsych-html-keyboard-response.js" type="text/javascript"></script>
  <script src="js/jspsych/plugins/jspsych-image-keyboard-response.js" type="text/javascript"></script>
  <script src="js/jspsych/plugins/jspsych-feedback-image-keyboard-response.js" type="text/javascript">
  </script>
  <script src="js/jspsych/plugins/jspsych-fullscreen.js" type="text/javascript"></script>

  <!-- Load Qualtrics iFrame HTML -->
  <script src="js/lib/markup/qualtrics.js" type="text/javascript"></script>
  <!-- <script src="js/qualtrics.js" type="text/javascript"></script> -->

  <!-- Load stylesheets and other utils -->
  <script src="js/utils.js" type="text/javascript"> </script>
  <link rel="stylesheet" href="css/jspsych.css" />
  <link rel="stylesheet" href="css/style.css" />
</head>

<script>
  // send call 
  // console.log('sending call')
  // call python script to generate task timeline
  //var timeline = $.ajax('/get_rlwmpst_trials', {
  //type: "GET",
  //async: false,
  //success: function () {
  //  console.log('Data successfully loaded.')
  //}
  //})["responseJSON"];

  var qualtricsPage = {
    type: 'html-button-response',
    stimulus: [
      '<div id="iframe"> <iframe width="900" height="900"' +
      ' src="https://brown.co1.qualtrics.com/jfe/form/SV_6xNgXiaN1eyozkh"' +
      ' frameborder="0"' +
      ' allowfullscreen > </iframe></div>'
    ],
    choices: jsPsych.NO_KEYS
  }
  // jankily append qualtrics at end of python-generated task timeline
  // timeline.push(qualtricsPage)

  /* start the experiment */
  jsPsych.init({
    timeline: qualtricsPage,
    // timeline: timeline,
    on_finish: function () {},
    show_preload_progress_bar: true,
    on_data_update: function (data) {},
    default_iti: 0,
  });
</script>

</html>